<div class="signup-container">
  <!-- Decorative stars background -->
  <div class="stars-container">
    <div class="star" style="left: 492.53px; top: 595.08px; opacity: 0.5;"></div>
    <div class="star" style="left: 1176.72px; top: 800.06px; opacity: 0.417;"></div>
    <div class="star" style="left: 1279.94px; top: 285.41px; opacity: 0.304;"></div>
    <div class="star" style="left: 572.63px; top: 765.67px; opacity: 0.232;"></div>
    <div class="star" style="left: 359.75px; top: 934.48px; opacity: 0.39;"></div>
    <div class="star" style="left: 1463.19px; top: 654.22px; opacity: 0.377;"></div>
    <div class="star" style="left: 85.33px; top: 225.03px; opacity: 0.207;"></div>
    <div class="star" style="left: 1141.02px; top: 79.05px; opacity: 0.5;"></div>
    <div class="star" style="left: 673.52px; top: 281.22px; opacity: 0.392;"></div>
    <div class="star" style="left: 44.61px; top: 791.06px; opacity: 0.202;"></div>
    <div class="star" style="left: 1379.55px; top: 61.56px; opacity: 0.413;"></div>
    <div class="star" style="left: 1045.7px; top: 220.8px; opacity: 0.307;"></div>
    <div class="star" style="left: 1157.8px; top: 295.67px; opacity: 0.213;"></div>
    <div class="star" style="left: 1467.92px; top: 504.17px; opacity: 0.483;"></div>
    <div class="star" style="left: 600.22px; top: 181.77px; opacity: 0.356;"></div>
    <div class="star" style="left: 788.7px; top: 579.09px; opacity: 0.46;"></div>
    <div class="star" style="left: 696.19px; top: 269.33px; opacity: 0.5;"></div>
    <div class="star" style="left: 1197.52px; top: 785.13px; opacity: 0.494;"></div>
    <div class="star" style="left: 601.81px; top: 457.23px; opacity: 0.224;"></div>
    <div class="star" style="left: 1376.78px; top: 207.19px; opacity: 0.474;"></div>
  </div>

  <!-- Main content -->
  <div class="signup-content">
    <!-- Header -->
    <div class="signup-header">
      <!-- Logo -->
      <div class="signup-logo">
        <img [src]="navbarIcon" alt="Éxito Juntos" class="logo-img" />
      </div>

      <h1 class="signup-title">REGISTRO</h1>
      <p class="signup-subtitle">Únete al éxito</p>

      <!-- Referrer info -->
      <div class="referrer-info" *ngIf="sponsor">
        <p class="referrer-text">
          <strong>Referido por:</strong> {{ user.name }} {{ user.last_name }}
          <br>
          <span class="referrer-phone">Tel: {{ sponsor }}</span>
        </p>
      </div>
    </div>

    <!-- Form container -->
    <div class="signup-form-container">
      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="signup-form">
        <!-- Nombre -->
        <div class="form-field">
          <label for="name" class="form-label">Nombre</label>
          <input id="name" type="text" formControlName="name" class="form-input"
            [class.is-invalid]="submitted && f['name'].errors" />
        </div>

        <!-- Apellidos -->
        <div class="form-field">
          <label for="last_name" class="form-label">Apellidos</label>
          <input id="last_name" type="text" formControlName="last_name" class="form-input"
            [class.is-invalid]="submitted && f['last_name'].errors" />
        </div>

        <!-- Email -->
        <div class="form-field">
          <label for="email" class="form-label">Email</label>
          <input id="email" type="email" formControlName="email" class="form-input"
            [class.is-invalid]="submitted && f['email'].errors" />
        </div>

        <!-- País -->
        <div class="form-field">
          <label for="country" class="form-label">País</label>
          <select id="country" formControlName="country" class="form-select"
            [class.is-invalid]="submitted && f['country'].errors" (change)="onCountrySelected($event.target.value)">
            <option value="" disabled selected>Selecciona tu país</option>
            <option *ngFor="let country of listcountry" [value]="country.id">
              {{ country.name }}
            </option>
          </select>
        </div>

        <!-- Número de teléfono -->
        <div class="form-field">
          <label for="phone" class="form-label">Número de teléfono</label>
          <input id="phone" type="tel" formControlName="phone" class="form-input"
            [class.is-invalid]="submitted && f['phone'].errors" />
        </div>

        <!-- Ciudad -->
        <div class="form-field">
          <label for="city" class="form-label">Ciudad</label>
          <input id="city" type="text" formControlName="city" class="form-input"
            [class.is-invalid]="submitted && f['city'].errors" />
        </div>

        <!-- Estado -->
        <div class="form-field">
          <label for="state" class="form-label">Estado/Provincia</label>
          <input id="state" type="text" formControlName="state" class="form-input"
            [class.is-invalid]="submitted && f['state'].errors" />
        </div>

        <!-- Dirección -->
        <div class="form-field">
          <label for="address" class="form-label">Dirección</label>
          <input id="address" type="text" formControlName="address" class="form-input"
            [class.is-invalid]="submitted && f['address'].errors" />
        </div>

        <!-- Fecha de nacimiento -->
        <div class="form-field">
          <label for="birtDate" class="form-label">Fecha de nacimiento</label>
          <input id="birtDate" type="date" formControlName="birtDate" class="form-input"
            [class.is-invalid]="submitted && f['birtDate'].errors" />
        </div>

        <!-- Contraseña -->
        <div class="form-field">
          <label for="password" class="form-label">Contraseña</label>
          <div class="password-field">
            <input id="password" [type]="showPassword ? 'text' : 'password'" formControlName="password"
              class="form-input" [class.is-invalid]="submitted && f['password'].errors" />
            <button type="button" class="password-toggle" (click)="togglePasswordVisibility()" tabindex="-1">
              <i [class]="showPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
            </button>
          </div>
        </div>

        <!-- Confirmar contraseña -->
        <div class="form-field">
          <label for="repitpassword" class="form-label">Confirmar contraseña</label>
          <div class="password-field">
            <input id="repitpassword" [type]="showConfirmPassword ? 'text' : 'password'" formControlName="repitpassword"
              class="form-input" [class.is-invalid]="submitted && f['repitpassword'].errors" />
            <button type="button" class="password-toggle" (click)="toggleConfirmPasswordVisibility()" tabindex="-1">
              <i [class]="showConfirmPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
            </button>
          </div>
        </div>

        <!-- Términos y condiciones -->
        <div class="form-checkbox">
          <input type="checkbox" id="terms" formControlName="terms_conditions" class="checkbox-input"
            [class.is-invalid]="submitted && f['terms_conditions'].errors" />
          <label for="terms" class="checkbox-label">
            Acepto los <a (click)="showTermsAndConditions()" class="terms-link">términos y condiciones</a> de uso y la
            política de privacidad
          </label>
        </div>

        <!-- Submit button -->
        <button type="submit" class="submit-button">
          Registrarse
        </button>
      </form>
    </div>

    <!-- Footer link -->
    <div class="signup-footer">
      <p class="footer-text">
        ¿Ya tienes cuenta?
        <a routerLink="/signin" class="footer-link">Inicia sesión</a>
      </p>
    </div>
  </div>
</div>
